{% extends 'base.html.twig' %}

{% block body %}
    <div class="container">
        <h1>Tape-truc !</h1>
        <h2>Score : <span id="score">0</span></h2>

        <button class="btn btn-primary" id="start-button">Commencer !</button>

        <div class="game row">
            <div class="hole hole1 col-4">
                <div class="mole"></div>
            </div>
            <div class="hole hole2 col-4">
                <div class="mole"></div>
            </div>
            <div class="hole hole3 col-4">
                <div class="mole"></div>
            </div>
            <div class="hole hole4 col-4">
                <div class="mole"></div>
            </div>
            <div class="hole hole5 col-4">
                <div class="mole"></div>
            </div>
            <div class="hole hole6 col-4">
                <div class="mole"></div>
            </div>
            <div class="hole hole7 col-4">
                <div class="mole"></div>
            </div>
            <div class="hole hole8 col-4">
                <div class="mole"></div>
            </div>
            <div class="hole hole9 col-4">
                <div class="mole"></div>
            </div>
        </div>
    </div>

    <script>
        /*const holes = document.getElementsByClassName('hole');
        const scoreBoard = document.getElementById('score');
        const moles = document.getElementsByClassName('mole');
        const startButton = document.getElementById('start-button');
        let lastHole;
        let timeUp = false;
        let score = 0;

        startButton.addEventListener('click', () => {
            startGame();
        });

        function randomTime(min, max) {
            return Math.round(Math.random() * (max - min) + min);
        }

        function randomHole(holes) {
            const index = Math.floor(Math.random() * holes.length);
            const hole = holes[index];
            if (hole === lastHole) {
                return randomHole(holes);
            }

            lastHole = hole;
            return hole;
        }

        function peep() {
            const time = randomTime(500, 2000);
            const hole = randomHole(holes);
            hole.classList.add('up');
            setTimeout(() => {
                hole.classList.remove('up');
                if (!timeUp) {
                    peep();
                }
            }, time)
        }

        function startGame() {
            scoreBoard.textContent = '0';
            score = 0;
            timeUp = false;
            peep();
            setTimeout(() => timeUp = true, 10000)
        }

        for (let i = 0; i < moles.length; i++) {
            moles[i].addEventListener('click', () => {
                score++;
                holes[i].classList.remove('up');
                scoreBoard.textContent = score;
            })
        }*/

    </script>

{% endblock %}

{% block javascripts %}
    {{ encore_entry_script_tags('app') }}
    {{ encore_entry_script_tags('game') }}
{% endblock %}
